(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{281:function(a,t,e){"use strict";e.r(t);var s=e(14),n=Object(s.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"moving-a-git-branch-to-a-new-base"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#moving-a-git-branch-to-a-new-base"}},[a._v("#")]),a._v(" Moving A Git Branch To A New Base")]),a._v(" "),t("p",[a._v("Suppose you have some work on a git branch that you started from one branch, and you want to move that work to be based on a different branch, as if you had started from there originally. The git rebase command gives you the tools to do it, but it’s complicated, and I can never remember the details, so I finally figured it out and made an alias to do it.")]),a._v(" "),t("p",[a._v("In this post I’ll use an example where I’m working on branch “my-work”, which I started from “old-home” and I want to move it to “new-home”. My initial state looks like this:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("% "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" log "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--oneline")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--decorate")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--graph")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--all")]),a._v("\n* a8ab80e "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("HEAD -"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" my-work"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" my work edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n* 5f66562 my work edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" * "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("9682932")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("old-home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" old-home edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("/\n* 98d09e4 old-home edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n* a6fa334 old-home edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" * e409e95 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("new-home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" new-home edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" * 7d3ca09 new-home edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("/\n* 1b008d5 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" main edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n* e9152aa main edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])])]),t("p",[a._v("The git tool to perform a move like this is “git rebase --onto”. The general form of the command needs three pieces of information, but the third is the branch to move, which defaults to the current branch, so we can just omit that. The other two items are: where you want to snip the current branch from, and where you want to graft it onto. The command looks like this:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" rebase "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--onto")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("graft-onto"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("snip-from"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("branch-to-move"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("p",[a._v("In our example, we want to snip the branch from the point where it started on old-home. The “git merge-base” command can tell us the commit where two branches diverge, so it’s perfect for this:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("% "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" merge-base old-home @\n98d09e4b4d3ca45e3e03cf27386f7dd01f0662a8\n")])])]),t("p",[a._v("Putting this together in one command looks like this:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("% "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" rebase "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--onto")]),a._v(" new-home "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" merge-base old-home @"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\nSuccessfully rebased and updated refs/heads/my-work.\n")])])]),t("p",[a._v("The result is just what we wanted:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("% "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" log "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--oneline")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--decorate")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--graph")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--all")]),a._v("\n* df22106 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("HEAD -"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" my-work"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" my work edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n* 9ac8707 my work edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n* e409e95 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("new-home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" new-home edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n* 7d3ca09 new-home edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" * "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("9682932")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("old-home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" old-home edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" * 98d09e4 old-home edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" * a6fa334 old-home edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("/\n* 1b008d5 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" main edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n* e9152aa main edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])])]),t("p",[a._v("But that command is complicated to type, so I made an alias in my .gitconfig:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("alias"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nmovebranch "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"!f() { \\\n    : git checkout \\\n    git rebase --onto '),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$2")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" merge-base $1 @"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(' \\\n}; f"')]),a._v("\n")])])]),t("p",[a._v("Now our branch move command would look like this:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("% "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" movebranch old-home new-home\nSuccessfully rebased and updated refs/heads/my-work.\n")])])]),t("p",[a._v("And the result is the same:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("% "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" log "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--oneline")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--decorate")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--graph")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--all")]),a._v("\n* df22106 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("HEAD -"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" my-work"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" my work edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n* 9ac8707 my work edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n* e409e95 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("new-home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" new-home edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n* 7d3ca09 new-home edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" * "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("9682932")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("old-home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" old-home edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" * 98d09e4 old-home edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" * a6fa334 old-home edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("/\n* 1b008d5 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" main edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n* e9152aa main edit "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);