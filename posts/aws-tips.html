<!DOCTYPE html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.61" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://minhtd18.github.io/posts/aws-tips.html"><meta property="og:title" content="AWS TIPS I WISH I'D KNOWN BEFORE I STARTED"><meta property="og:description" content="Moving from physical servers to the "cloud" involves a paradigm shift in thinking. Generally in a physical environment you care about each invididual host; they each have their own static IP, you probably monitor them individually, and if one goes down you have to get it back up ASAP. You might think you can just move this infrastructure to AWS and start getting the benefits of the "cloud" straight away. Unfortunately, it's not quite that easy (believe me, I tried). You need think differently when it comes to AWS, and it's not always obvious what needs to be done"><meta property="og:type" content="article"><meta property="og:locale" content="en-US"><meta property="og:updated_time" content="2023-06-26T16:21:09.000Z"><meta property="article:author" content="Rich Adams"><meta property="article:tag" content="AWS"><meta property="article:published_time" content="2023-06-26T00:00:00.000Z"><meta property="article:modified_time" content="2023-06-26T16:21:09.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"AWS TIPS I WISH I'D KNOWN BEFORE I STARTED","image":[""],"datePublished":"2023-06-26T00:00:00.000Z","dateModified":"2023-06-26T16:21:09.000Z","author":[{"@type":"Person","name":"Rich Adams"}]}</script><title>AWS TIPS I WISH I'D KNOWN BEFORE I STARTED</title><meta name="description" content="Moving from physical servers to the "cloud" involves a paradigm shift in thinking. Generally in a physical environment you care about each invididual host; they each have their own static IP, you probably monitor them individually, and if one goes down you have to get it back up ASAP. You might think you can just move this infrastructure to AWS and start getting the benefits of the "cloud" straight away. Unfortunately, it's not quite that easy (believe me, I tried). You need think differently when it comes to AWS, and it's not always obvious what needs to be done">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-705bc8d4.css" as="style"><link rel="stylesheet" href="/assets/style-705bc8d4.css">
    <link rel="modulepreload" href="/assets/app-be81fa68.js"><link rel="modulepreload" href="/assets/framework-3171eed8.js"><link rel="modulepreload" href="/assets/aws-tips.html-ef9c47c1.js"><link rel="modulepreload" href="/assets/aws-tips.html-9189ce6e.js"><link rel="prefetch" href="/assets/index.html-d7c74a58.js" as="script"><link rel="prefetch" href="/assets/about.html-39c15e1b.js" as="script"><link rel="prefetch" href="/assets/aws-build-a-simple-infrastructure.html-bbf23000.js" as="script"><link rel="prefetch" href="/assets/aws-introduction.html-74d5b951.js" as="script"><link rel="prefetch" href="/assets/aws-lambda-sqs.html-8794bd98.js" as="script"><link rel="prefetch" href="/assets/essential-mindset-for-frontend-developers.html-e581d2c6.js" as="script"><link rel="prefetch" href="/assets/how-to-create-a-simple-todolist-with-fastapi.html-92ce0d2f.js" as="script"><link rel="prefetch" href="/assets/moving-a-git-branch-to-a-new-base.html-4d3604f3.js" as="script"><link rel="prefetch" href="/assets/python-custom-formatting.html-9aad0941.js" as="script"><link rel="prefetch" href="/assets/python-developer-career-path.html-9c029f9e.js" as="script"><link rel="prefetch" href="/assets/404.html-7426b85d.js" as="script"><link rel="prefetch" href="/assets/index.html-bd4bffc7.js" as="script"><link rel="prefetch" href="/assets/index.html-e0abbb01.js" as="script"><link rel="prefetch" href="/assets/index.html-3f02cc6e.js" as="script"><link rel="prefetch" href="/assets/index.html-e695a5d4.js" as="script"><link rel="prefetch" href="/assets/index.html-f123466c.js" as="script"><link rel="prefetch" href="/assets/index.html-002e140f.js" as="script"><link rel="prefetch" href="/assets/index.html-bde4edef.js" as="script"><link rel="prefetch" href="/assets/index.html-e94fb767.js" as="script"><link rel="prefetch" href="/assets/index.html-d0d0baa0.js" as="script"><link rel="prefetch" href="/assets/index.html-57388468.js" as="script"><link rel="prefetch" href="/assets/index.html-6ca89778.js" as="script"><link rel="prefetch" href="/assets/index.html-35140c57.js" as="script"><link rel="prefetch" href="/assets/index.html-e26e99a0.js" as="script"><link rel="prefetch" href="/assets/about.html-6051e3e3.js" as="script"><link rel="prefetch" href="/assets/aws-build-a-simple-infrastructure.html-64c785bf.js" as="script"><link rel="prefetch" href="/assets/aws-introduction.html-a1332afc.js" as="script"><link rel="prefetch" href="/assets/aws-lambda-sqs.html-5cdfdac3.js" as="script"><link rel="prefetch" href="/assets/essential-mindset-for-frontend-developers.html-c672be8b.js" as="script"><link rel="prefetch" href="/assets/how-to-create-a-simple-todolist-with-fastapi.html-7bc5ba55.js" as="script"><link rel="prefetch" href="/assets/moving-a-git-branch-to-a-new-base.html-03d90e43.js" as="script"><link rel="prefetch" href="/assets/python-custom-formatting.html-9679d765.js" as="script"><link rel="prefetch" href="/assets/python-developer-career-path.html-21a0a9c5.js" as="script"><link rel="prefetch" href="/assets/404.html-21dfd248.js" as="script"><link rel="prefetch" href="/assets/index.html-cf11f40b.js" as="script"><link rel="prefetch" href="/assets/index.html-19af25b8.js" as="script"><link rel="prefetch" href="/assets/index.html-9d253b6d.js" as="script"><link rel="prefetch" href="/assets/index.html-00813a89.js" as="script"><link rel="prefetch" href="/assets/index.html-35f62abc.js" as="script"><link rel="prefetch" href="/assets/index.html-d23fb9cc.js" as="script"><link rel="prefetch" href="/assets/index.html-eec5c09d.js" as="script"><link rel="prefetch" href="/assets/index.html-f2516a79.js" as="script"><link rel="prefetch" href="/assets/index.html-0dd9987c.js" as="script"><link rel="prefetch" href="/assets/index.html-2bc80d3b.js" as="script"><link rel="prefetch" href="/assets/index.html-d8b8389c.js" as="script"><link rel="prefetch" href="/assets/index.html-bf4c70c8.js" as="script"><link rel="prefetch" href="/assets/giscus-f311b0ba.js" as="script"><link rel="prefetch" href="/assets/auto-ba5ecab5.js" as="script"><link rel="prefetch" href="/assets/index-b03bef79.js" as="script"><link rel="prefetch" href="/assets/flowchart-8b576787.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-ccb3adc6.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-75b11b9d.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-0191f9da.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-a106bb2c.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-ab04f0b1.js" as="script"><link rel="prefetch" href="/assets/search.esm-7e6792e2.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-05528ae4.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-36cd6c3c.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button type="button" class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a href="/" class="brand"><img class="logo" src="/logo.svg" alt><!----><!----></a><!--]--><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><!--[--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="Home"><span class="font-icon icon iconfont icon-home" style=""></span>Home<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Posts"><span class="title"><span class="font-icon icon iconfont icon-article" style=""></span>Posts</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Articles</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/aws-lambda-sqs.html" class="nav-link" aria-label="AWS Lambda and AWS SQS A Powerful Combination "><span class="font-icon icon iconfont icon-read" style=""></span>AWS Lambda and AWS SQS A Powerful Combination <!----></a></li><li class="dropdown-subitem"><a aria-current="page" href="/posts/aws-tips.html" class="router-link-active router-link-exact-active nav-link active" aria-label="AWS TIPS I WISH I&#39;D KNOWN BEFORE I STARTED"><span class="font-icon icon iconfont icon-read" style=""></span>AWS TIPS I WISH I&#39;D KNOWN BEFORE I STARTED<!----></a></li><li class="dropdown-subitem"><a href="/posts/essential-mindset-for-frontend-developer.html" class="nav-link" aria-label="Essential mindset for frontend developer"><span class="font-icon icon iconfont icon-read" style=""></span>Essential mindset for frontend developer<!----></a></li><li class="dropdown-subitem"><a href="/posts/aws-build-a-simple-infrastructure.html" class="nav-link" aria-label="Building a simple infrastructure in AWS"><span class="font-icon icon iconfont icon-read" style=""></span>Building a simple infrastructure in AWS<!----></a></li><li class="dropdown-subitem"><a href="/posts/aws-introduction.html" class="nav-link" aria-label="AWS introduction"><span class="font-icon icon iconfont icon-read" style=""></span>AWS introduction<!----></a></li><li class="dropdown-subitem"><a href="/posts/python-developer-career-path.html" class="nav-link" aria-label="Python developer career path"><span class="font-icon icon iconfont icon-read" style=""></span>Python developer career path<!----></a></li><li class="dropdown-subitem"><a href="/posts/moving-a-git-branch-to-a-new-base.html" class="nav-link" aria-label="Moving a git branch to a new base"><span class="font-icon icon iconfont icon-read" style=""></span>Moving a git branch to a new base<!----></a></li><li class="dropdown-subitem"><a href="/posts/how-to-create-a-simple-todolist-with-fastapi.html" class="nav-link" aria-label="How to create a simple todo list with FastAPI"><span class="font-icon icon iconfont icon-read" style=""></span>How to create a simple todo list with FastAPI<!----></a></li><li class="dropdown-subitem"><a href="/posts/python-custom-formatting.html" class="nav-link" aria-label="Python custom formatting"><span class="font-icon icon iconfont icon-read" style=""></span>Python custom formatting<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/posts/about.html" class="nav-link" aria-label="About"><!---->About<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/MinhTD18/minhtd18.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" class="outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/" class="nav-link sidebar-link sidebar-page" aria-label="Home"><span class="font-icon icon iconfont icon-home" style=""></span>Home<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><p class="sidebar-heading active"><span class="font-icon icon iconfont icon-note" style=""></span><span class="title">Articles</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/aws-introduction.html" class="nav-link sidebar-link sidebar-page" aria-label="AWS Introduction"><!---->AWS Introduction<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/aws-lambda-sqs.html" class="nav-link sidebar-link sidebar-page" aria-label="AWS Lambda and AWS SQS A Powerful Combination"><!---->AWS Lambda and AWS SQS A Powerful Combination<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/posts/aws-tips.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="AWS TIPS I WISH I&#39;D KNOWN BEFORE I STARTED"><!---->AWS TIPS I WISH I&#39;D KNOWN BEFORE I STARTED<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/posts/aws-tips.html#application-development" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Application Development"><!---->Application Development<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/aws-tips.html#operations" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Operations"><!---->Operations<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/aws-tips.html#billing" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Billing"><!---->Billing<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/aws-tips.html#security" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Security"><!---->Security<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/aws-tips.html#s3" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="S3"><!---->S3<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/aws-tips.html#ec2-vpc" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="EC2/VPC"><!---->EC2/VPC<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/aws-tips.html#elb" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ELB"><!---->ELB<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/aws-tips.html#elasticache" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ElastiCache"><!---->ElastiCache<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/aws-tips.html#rds" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="RDS"><!---->RDS<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/aws-tips.html#cloudwatch" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="CloudWatch"><!---->CloudWatch<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/aws-tips.html#auto-scaling" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Auto-Scaling"><!---->Auto-Scaling<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/aws-tips.html#iam" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="IAM"><!---->IAM<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/aws-tips.html#route53" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Route53"><!---->Route53<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/aws-tips.html#elastic-mapreduce" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Elastic MapReduce"><!---->Elastic MapReduce<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/aws-tips.html#miscellaneous-tips" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Miscellaneous Tips"><!---->Miscellaneous Tips<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/aws-tips.html#parting-words" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Parting Words"><!---->Parting Words<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/aws-tips.html#reference" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Reference"><!---->Reference<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/posts/aws-build-a-simple-infrastructure.html" class="nav-link sidebar-link sidebar-page" aria-label="Building a simple infrastructure in AWS"><!---->Building a simple infrastructure in AWS<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/how-to-create-a-simple-todolist-with-fastapi.html" class="nav-link sidebar-link sidebar-page" aria-label="Create A Simple Todo List API Using FastAPI"><!---->Create A Simple Todo List API Using FastAPI<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/essential-mindset-for-frontend-developers.html" class="nav-link sidebar-link sidebar-page" aria-label="Essential Mindsets for Frontend Developers"><!---->Essential Mindsets for Frontend Developers<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/python-developer-career-path.html" class="nav-link sidebar-link sidebar-page" aria-label="How to Build a Successful Career in Python Development"><!---->How to Build a Successful Career in Python Development<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/moving-a-git-branch-to-a-new-base.html" class="nav-link sidebar-link sidebar-page" aria-label="Moving A Git Branch To A New Base"><!---->Moving A Git Branch To A New Base<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/python-custom-formatting.html" class="nav-link sidebar-link sidebar-page" aria-label="Python Custom Formatting"><!---->Python Custom Formatting<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><!--[--><a href="/about.html" class="nav-link sidebar-link sidebar-page" aria-label="About"><!---->About<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->AWS TIPS I WISH I&#39;D KNOWN BEFORE I STARTED</h1><div class="page-info"><span class="page-author-info" aria-label="AuthorðŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">Rich Adams</span></span><span property="author" content="Rich Adams"></span></span><!----><span class="page-date-info" aria-label="Writing DateðŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-06-26T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading TimeâŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 18 min</span><meta property="timeRequired" content="PT18M"></span><span class="page-category-info" aria-label="CategoryðŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category6 clickable" role="navigation">Guide</span><!--]--><meta property="articleSection" content="Guide"></span><span class="page-tag-info" aria-label="TagðŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag6 clickable" role="navigation">AWS</span><!--]--><meta property="keywords" content="AWS"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">On This Page<button type="button" class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/aws-tips.html#application-development" class="router-link-active router-link-exact-active toc-link level3">Application Development</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/aws-tips.html#operations" class="router-link-active router-link-exact-active toc-link level3">Operations</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/aws-tips.html#billing" class="router-link-active router-link-exact-active toc-link level3">Billing</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/aws-tips.html#security" class="router-link-active router-link-exact-active toc-link level3">Security</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/aws-tips.html#s3" class="router-link-active router-link-exact-active toc-link level3">S3</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/aws-tips.html#ec2-vpc" class="router-link-active router-link-exact-active toc-link level3">EC2/VPC</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/aws-tips.html#elb" class="router-link-active router-link-exact-active toc-link level3">ELB</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/aws-tips.html#elasticache" class="router-link-active router-link-exact-active toc-link level3">ElastiCache</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/aws-tips.html#rds" class="router-link-active router-link-exact-active toc-link level3">RDS</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/aws-tips.html#cloudwatch" class="router-link-active router-link-exact-active toc-link level3">CloudWatch</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/aws-tips.html#auto-scaling" class="router-link-active router-link-exact-active toc-link level3">Auto-Scaling</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/aws-tips.html#iam" class="router-link-active router-link-exact-active toc-link level3">IAM</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/aws-tips.html#route53" class="router-link-active router-link-exact-active toc-link level3">Route53</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/aws-tips.html#elastic-mapreduce" class="router-link-active router-link-exact-active toc-link level3">Elastic MapReduce</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/aws-tips.html#miscellaneous-tips" class="router-link-active router-link-exact-active toc-link level3">Miscellaneous Tips</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/aws-tips.html#parting-words" class="router-link-active router-link-exact-active toc-link level3">Parting Words</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/aws-tips.html#reference" class="router-link-active router-link-exact-active toc-link level3">Reference</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><p>Moving from physical servers to the &quot;cloud&quot; involves a paradigm shift in thinking. Generally in a physical environment you care about each invididual host; they each have their own static IP, you probably monitor them individually, and if one goes down you have to get it back up ASAP. You might think you can just move this infrastructure to AWS and start getting the benefits of the &quot;cloud&quot; straight away. Unfortunately, it&#39;s not quite that easy (believe me, I tried). You need think differently when it comes to AWS, and it&#39;s not always obvious what needs to be done.</p><p>So, inspired by <a href="https://launchbylunch.com/posts/2014/Jan/29/aws-tips/" target="_blank" rel="noopener noreferrer">Sehrope Sarkuni&#39;s recent post<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, here&#39;s a collection of AWS tips I wish someone had told me when I was starting out. These are based on things I&#39;ve learned deploying various applications on AWS both personally and for my day job. Some are just &quot;gotcha&quot;&#39;s to watch out for (and that I fell victim to), some are things I&#39;ve heard from other people that I ended up implementing and finding useful, but mostly they&#39;re just things I&#39;ve learned the hard way.</p><h3 id="application-development" tabindex="-1"><a class="header-anchor" href="#application-development" aria-hidden="true">#</a> Application Development</h3><p><strong>Store no application state on your servers.</strong><br> The reason for this is so that if you server gets killed, you won&#39;t lose any application state. To that end, sessions should be stored in a database (or some other sort of central storage; memcached, redis, etc.), not on the local filesystem. Logs should be handled via syslog (or similar) and sent to a remote store. Uploads should go direct to S3 (don&#39;t store on local filesystem and have another process move to S3 for example). And any post-processing or long running tasks should be done via an asynchronous queue (SQS is great for this).</p><p><strong>Edit:</strong> <em>For S3 uploads, HN user <a href="https://news.ycombinator.com/item?id=7172583" target="_blank" rel="noopener noreferrer">krallin pointed out<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> that you can bypass your server entirely and use <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/PresignedUrlUploadObject.html" target="_blank" rel="noopener noreferrer">pre-signed URLs<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> to let your users upload directly to S3.</em></p><p><strong>Store extra information in your logs.</strong><br> Log lines normally have information like timestamp, pid, etc. You&#39;ll also probably want to add <em>instance-id</em>, <em>region</em>, <em>availability-zone</em> and <em>environment</em> (staging, production, etc), as these will help debugging considerably. You can get this information from the <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AESDG-chapter-instancedata.html" target="_blank" rel="noopener noreferrer">instance metadata service<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>. The method I use is to grab this information as part of my bootstrap scripts, and store it in files on the filesystem (/env/az, /env/region, etc). This way I&#39;m not constantly querying the metadata service for the information. You should make sure this information gets updated properly when your instances reboot, as you don&#39;t want to save an AMI and have the same data persist, as it will then be incorrect.</p><p><strong>If you need to interact with AWS, use the SDK for your langauge.</strong><br> Don&#39;t try to roll your own, I did this at first as I only needed a simple upload to S3, but then you add more services and it&#39;s just an all around bad idea. <a href="http://aws.amazon.com/tools/" target="_blank" rel="noopener noreferrer">The AWS SDKs<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> are well written, handle authentication automatically, handle retry logic, and they&#39;re maintained and iterated on by Amazon. Also, if you use EC2 IAM roles (which you absolutely should, more on this later) then the SDK will automatically grab the correct credentials for you.</p><p><strong>Have tools to view application logs.</strong><br> You should have an admin tool, syslog viewer, or something that allows you to view current real-time log info without needing to SSH into a running instance. If you have centralised logging (which you really should), then you just want to be sure you can read the logs there without needing to use SSH. Needing to SSH into a running application instance to view logs is going to become problematic.</p><h3 id="operations" tabindex="-1"><a class="header-anchor" href="#operations" aria-hidden="true">#</a> Operations</h3><blockquote><p>If you have to SSH into your servers, then your automation has failed.</p></blockquote><p><strong>Disable SSH access to all servers.</strong><br> This sounds crazy, I know, but port 22 should be disallowed for everyone in your security group. If there&#39;s one thing you take away from this post, this should be it: <strong>If you have to SSH into your servers, then your automation has failed</strong>. Disabling it at the firewall level (rather than on the servers themselves) will help the transition to this frame of thinking, as it will highlight any areas you need to automate, while still letting you easily re-instate access to solve immediate issues. It&#39;s incredibly freeing to know that you never need to SSH into an instance. This is both the most frightening and yet most useful thing I&#39;ve learned.</p><p><strong>Edit:</strong> <em>A lot of people are concerned about this particular tip (there&#39;s some <a href="https://news.ycombinator.com/item?id=7173361" target="_blank" rel="noopener noreferrer">good discussion over on Hacker News<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>), so I&#39;d like to expand on it a little. Disabling inbound SSH has just been a way for me to stop myself cheating with automation (Oh, I&#39;ll just SSH in and fix this one thing). I can still re-enable it in the security group if I need to actively debug something on an instance, since sometimes there really is no other way to debug certain issues. It also depends on your application; If your application relies on you being able to push things to a server via SSH, then disabling it might be a bad idea. Blocking inbound SSH worked for me, and forced me to get my automation into a decent state, but it might not be for everyone.</em></p><p><strong>Servers are ephemeral, you don&#39;t care about them. You only care about the service as a whole.</strong><br> If a single server dies, it should be of no big concern to you. This is where the real benefit of AWS comes in compared to using physical servers yourself. Normally if a physical server dies, there&#39;s panic. With AWS, you don&#39;t care, because auto-scaling will give you a fresh new instance soon anyway. Netflix have taken this several steps further with their <a href="http://techblog.netflix.com/2011/07/netflix-simian-army.html" target="_blank" rel="noopener noreferrer">simian army<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, where they have things like <a href="http://techblog.netflix.com/2012/07/chaos-monkey-released-into-wild.html" target="_blank" rel="noopener noreferrer">Chaos Monkey<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, which will kill random instances in production (they also have Chaos Gorilla to kill AZs and I&#39;ve heard rumour of a Chaos Kong to kill regions...). The point is that <em>servers will fail</em>, but this shouldn&#39;t matter in your application.</p><p><strong>Don&#39;t give servers static/elastic IPs.</strong><br> For a typical web application, you should put things behind a load balancer, and balance them between AZs. There are a few cases where Elastic IPs will probably need to be used, but in order to make best use of auto-scaling you&#39;ll want to use a load balancer instad of giving every instance their own unique IP.</p><p><strong>Automate everything.</strong><br> This is more of general operations advice than AWS specific, but everything needs to be automated. Recovery, deployment, failover, etc. Package and OS updates should be managed by something, whether it&#39;s just a bash script, or Chef/Puppet, etc. You shouldn&#39;t have to care about this stuff. As mentioned earlier, you should also make sure to disable SSH access, as this will pretty quickly highlight any part of your process that isn&#39;t automated. Remember the key phrase from earlier, <em>if you have to SSH into your servers, then your automation has failed</em>.</p><p><strong>Everyone gets an IAM account. Never login to the master.</strong><br> Usually you&#39;ll have an &quot;operations account&quot; for a service, and your entire ops team will have the password. With AWS, you definitely don&#39;t want to do that. Everyone gets an IAM user with just the permissions they need (least privilege). An IAM user can control everything in the infrastructure. At the time of writing, the only thing an IAM user can&#39;t access are some parts of the billing pages.</p><p>If you want to protect your account even more, make sure to <a href="http://aws.amazon.com/iam/details/mfa/" target="_blank" rel="noopener noreferrer">enable multi-factor authentication<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> for everyone (you can use Google Authenticator). I&#39;ve heard of some users who give the MFA token to two people, and the password to two others, so to perform any action on the master account, two of the users need to agree. This is overkill for my case, but worth mentioning in case someone else wants to do it.</p><blockquote><p>The last time I had an actionable alert from CloudWatch was about a year ago...</p></blockquote><p><strong>Get your alerts to become notifications.</strong><br> If you&#39;ve set everyting up correctly, your health checks should automatically destroy bad instances and spawn new ones. There&#39;s usually no action to take when getting a CloudWatch alert, as everything should be automated. If you&#39;re getting alerts where manual intervention is required, do a post-mortem and figure out if there&#39;s a way you can automate the action in future. The last time I had an actionable alert from CloudWatch was about a year ago, and it&#39;s extremely awesome not to be woken up at 4am for ops alerts any more.</p><h3 id="billing" tabindex="-1"><a class="header-anchor" href="#billing" aria-hidden="true">#</a> Billing</h3><p><strong>Set up granular billing alerts.</strong><br> You should always have at least one billing alert set up, but that will only tell you on a monthly basis once you&#39;ve exceeded your allowance. If you want to catch runaway billing early, you need a more fine grained approach. The way I do it is to set up an alert for my expected usage each week. So the first week&#39;s alert for say $1,000, the second for $2,000, third for $3,000, etc. If the week-2 alarm goes off before the 14th/15th of the month, then I know something is probably going wrong. For even more fine-grained control, you can set this up for each individual service, that way you instantly know which service is causing the problem. This could be useful if your usage on one service is quite steady month-to-month, but another is more erratic. Have the indidividual weekly alerts for the steady one, but just an overall one for the more erratic one. If everything is steady, then this is probably overkill, as looking at CloudWatch will quickly tell you which service is the one causing the problem.</p><h3 id="security" tabindex="-1"><a class="header-anchor" href="#security" aria-hidden="true">#</a> Security</h3><p><strong>Use EC2 roles, do not give applications an IAM account.</strong><br> If your application has AWS credentials baked into it, you&#39;re &quot;doing it wrong&quot;. One of the reasons it&#39;s important to use the AWS SDK for your language is that you can really easily use EC2 IAM roles. The idea of a role is that you specify the permissions a certain role should get, then assign that role to an EC2 instance. Whenever you use the AWS SDK on that instance, you don&#39;t specify any credentials. Instead, the SDK will retrieve temporary credentials which have the permissions of the role you set up. This is all handled transparently as far as you&#39;re concerned. It&#39;s secure, and extremely useful.</p><p><strong>Assign permissions to groups, not users.</strong><br> Managing users can be a pain, if you&#39;re using Active Directory, or some other external authentication mechanism which you&#39;ve integrated with IAM, then this probably won&#39;t matter as much (or maybe it matters more). But I&#39;ve found it much easier to manage permissions by assigning them only to groups, rather than to individual users. It&#39;s much easier to rein in permissions and get an overall view of the system than going through each individual user to see what permissions have been assigned.</p><p><strong>Set up automated security auditing.</strong><br> It&#39;s important to keep track of changes in your infrastructure&#39;s security settings. One way to do this is to first set up a security auditer role (<a href="https://s3.amazonaws.com/reinvent2013-sec402/secaudit.json" target="_blank" rel="noopener noreferrer">JSON template<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>), which will give anyone assigned that role read-only access to any security related settings on your account. You can then use this rather <a href="https://s3.amazonaws.com/reinvent2013-sec402/SecConfig.py" target="_blank" rel="noopener noreferrer">fantastic Python script<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, which will go over all the items in your account and produce a canonical output showing your configuration. You set up a cronjob somewhere to run this script, and compare its output to the output from the previous run. Any differences will show you exactly what has been changed in your security configuration. It&#39;s useful to set this up and just have it email you the diff of any changes. (Source: Intrusion Detection in the Cloud - <a href="https://www.youtube.com/user/AmazonWebServices/Cloud?x=us-en_reinvent_1878_35" target="_blank" rel="noopener noreferrer">Video<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> &amp; <a href="http://awsmedia.s3.amazonaws.com/SEC402.pdf" target="_blank" rel="noopener noreferrer">Presentation<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>)</p><p><strong>Use CloudTrail to keep an audit log.</strong><br> CloudTrail will log any action performed via the APIs or web console into an S3 bucket. Set up the bucket with versioning to be sure no one can modify your logs, and you then have a complete audit trail of all changes in your account. You hope that you will never need to use this, but it&#39;s well worth having for when you do.</p><h3 id="s3" tabindex="-1"><a class="header-anchor" href="#s3" aria-hidden="true">#</a> S3</h3><p><strong>Use &quot;-&quot; instead of &quot;.&quot; in bucket names for SSL.</strong><br> If you ever want to use your bucket over SSL, using a &quot;.&quot; will cause you to get certificate mismatch errors. You can&#39;t change bucket names once you&#39;ve created them, so you&#39;d have to copy everything to a new bucket.</p><blockquote><p>I&#39;ve found them to be about as reliable as a large government department...</p></blockquote><p><strong>Avoid filesystem mounts (FUSE, etc).</strong><br> I&#39;ve found them to be about as reliable as a large government department when used in critical applications. Use the SDK instead.</p><p><strong>You don&#39;t have to use CloudFront in front of S3 (but it can help).</strong><br><strong>Edit:</strong> <em>Based on some <a href="https://news.ycombinator.com/item?id=7172936" target="_blank" rel="noopener noreferrer">excellent<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> <a href="https://news.ycombinator.com/item?id=7176110" target="_blank" rel="noopener noreferrer">feedback<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> from Hacker News users, I&#39;ve made some modifications to this tip</em>.<br> If all you care about is scalability, you can link people directly to the S3 URL instead of using CloudFront. S3 can scale to any capacity (although <a href="https://news.ycombinator.com/item?id=7173464" target="_blank" rel="noopener noreferrer">some users<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> have reported that it doesn&#39;t scale instantly), so is great if that&#39;s all your care about. Additionally, updates are available quickly in S3, yet you have to wait for the TTL when using a CDN to see the change (although I believe you can set a 0s TTL in CloudFront now, so this point is probably moot).</p><p>If you need speed, or are handling very high bandwidth (10TB+), then you might want to use a CDN like CloudFront in front of S3. CloudFront can dramatically <a href="http://www.quora.com/What-are-typical-latencies-for-static-content-in-S3-vs-Cloudfront" target="_blank" rel="noopener noreferrer">speed up access<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> for users around the globe, as it copies your content to edge locations. Depending on your use case, this can also work out slightly cheaper if you deal with very high bandwidth (10TB+) with lower request numbers, as it&#39;s about $0.010/GB cheaper for CloudFront bandwidth than S3 bandwidth once you get above 10TB, but the cost per request is slightly higher than if you were to access the files from S3 directly. Depending on your usage pattern, the savings from bandwidth could outweigh the extra cost per request. Since content is only fetched from S3 infrequently (and at a much lower rate than normal), your S3 cost would be much smaller than if you were serving content directly from S3. The <a href="http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/MigrateS3ToCloudFront.html" target="_blank" rel="noopener noreferrer">AWS documentation on CloudFront<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> explains how you can use it with S3.</p><p><strong>Use random strings at the start of your keys.</strong><br> This seems like a strange idea, but one of the implementation details of S3 is that Amazon use the object key to determine where a file is physically placed in S3. So files with the same prefix might end up on the same hard disk for example. By randomising your key prefixes, you end up with a better distribution of your object files. (Source: <a href="http://aws.typepad.com/aws/2012/03/amazon-s3-performance-tips-tricks-seattle-hiring-event.html" target="_blank" rel="noopener noreferrer">S3 Performance Tips &amp; Tricks<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>)</p><h3 id="ec2-vpc" tabindex="-1"><a class="header-anchor" href="#ec2-vpc" aria-hidden="true">#</a> EC2/VPC</h3><p><strong>Use tags!</strong><br> Pretty much everything can be given tags, use them! They&#39;re great for organising things, make it easier to search and group things up. You can also use them to trigger certain behaviour on your instances, for example a tag of env=debug could put your application into debug mode when it deploys, etc.</p><blockquote><p>I&#39;ve had it happen, it sucks, learn from my mistake!</p></blockquote><p><strong>Use termination protection for non-auto-scaling instances. Thank me later.</strong><br> If you have any instances which are one-off things that aren&#39;t under auto-scaling, then you should probably enable termination protection, to stop anyone from accidentally deleting the instance. I&#39;ve had it happen, it sucks, learn from my mistake!</p><p><strong>Use a VPC.</strong><br> VPC either wasn&#39;t around, or I didn&#39;t notice it when I got started with AWS. It seems like a pain at first, but once you get stuck in and play with it, it&#39;s suprising easy to set up and get going. It provides all sorts of extra features over EC2 that are well worth the extra time it takes to set up a VPC. First, you can control traffic at the network level using ACLs, you can modify instance size, security groups, etc. without needing to terminate an instance. You can specify egress firewall rules (you cannot control outbound traffic from normal EC2). But the biggest thing is that you have your own private subnet where your instances are completely cut off from everyone else, so it adds an extra layer of protection. Don&#39;t wait like I did, use VPC straight away to make things easy on yourself.</p><p>If you&#39;re interested in the internals of VPC, I highly recommend watching <a href="http://www.youtube.com/watch?v=Zd5hsL-JNY4" target="_blank" rel="noopener noreferrer">A Day in the Life of Billion Packets<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> (<a href="http://www.slideshare.net/AmazonWebServices/a-day-in-the-life-of-a-billion-packets-cpn401-aws-reinvent-2013" target="_blank" rel="noopener noreferrer">Slides<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>).</p><p><strong>Use reserved instances to save big $$$.</strong><br> Reserving an instance is just putting some money upfront in order to get a lower hourly rate. It ends up being a lot cheaper than an on-demand instance would cost. So if you know you&#39;re going to be keeping an instance around for 1 or 3 years, it&#39;s well worth reserving them. Reserved instances are a purely logical concept in AWS, you don&#39;t assign a specific instance to be reserved, but rather just specify the type and size, and any instances that match the criteria will get the lower price.</p><p><strong>Lock down your security groups.</strong><br> Don&#39;t use 0.0.0.0/0 if you can help it, make sure to use specific rules to restrict access to your instances. For example, if your instances are behind an ELB, you should set your security groups to only allow traffic from the ELBs, rather than from 0.0.0.0/0. You can do that by entering &quot;amazon-elb/amazon-elb-sg&quot; as the CIDR (it should auto-complete for you). If you need to allow some of your other instances access to certain ports, don&#39;t use their IP, but specify their security group identifier instead (just start typing &quot;sg-&quot; and it should auto-complete for you).</p><p><strong>Don&#39;t keep unassociated Elastic IPs.</strong><br> You get charged for any Elastic IPs you have created but not associated with an instance, so make sure you don&#39;t keep them around once you&#39;re done with them.</p><h3 id="elb" tabindex="-1"><a class="header-anchor" href="#elb" aria-hidden="true">#</a> ELB</h3><p><strong>Terminate SSL on the load balancer.</strong><br> You&#39;ll need to add your SSL certificate information to the ELB, but this will take the overhead of SSL termination away from your servers which can speed things up. Additionally, if you upload your SSL certificate, you can pass through the HTTPS traffic and the load balancer will add some extra headers to your request (x-forwarded-for, etc), which are useful if you want to know who the end user is. If you just forward TCP, then those headers aren&#39;t added and you lose the information.</p><p><strong>Pre-warm your ELBs if you&#39;re expecting heavy traffic.</strong><br> It takes time for your ELB to scale up capacity. If you know you&#39;re going to have a large traffic spike (selling tickets, big event, etc), you need to &quot;warm up&quot; your ELB in advance. You can inject a load of traffic, and it will cause ELB to scale up and not choke when you actually get the traffic, however AWS suggest you contact them instead to prewarm your load balancer. (Source: <a href="http://aws.amazon.com/articles/1636185810492479#pre-warming" target="_blank" rel="noopener noreferrer">Best Practices in Evaluating Elastic Load Balancing<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>). Alternatively you can install your own load balancer software on an EC2 instance and use that instead (HAProxy, etc).</p><h3 id="elasticache" tabindex="-1"><a class="header-anchor" href="#elasticache" aria-hidden="true">#</a> ElastiCache</h3><p><strong>Use the configuration endpoints, instead of individual node endpoints.</strong><br> Normally you would have to make your application aware of every Memcached node available. If you want to dynamically scale up your capacity, then this becomes an issue as you will need to have some way to make your application aware of the changes. An easier way is to use the configuration endpoint, which means using an AWS version of a Memcached library that abstracts away the auto-discovery of new nodes. The <a href="http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/AutoDiscovery.html" target="_blank" rel="noopener noreferrer">AWS guide to cache node auto-discovery<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> has more information.</p><h3 id="rds" tabindex="-1"><a class="header-anchor" href="#rds" aria-hidden="true">#</a> RDS</h3><p><strong>Set up event subscriptions for failover.</strong><br> If you&#39;re using a Multi-AZ setup, this is one of those things you might not think about which ends up being incredibly useful when you do need it.</p><h3 id="cloudwatch" tabindex="-1"><a class="header-anchor" href="#cloudwatch" aria-hidden="true">#</a> CloudWatch</h3><p><strong>Use the CLI tools.</strong><br> It can become extremely tedious to create alarms using the web console, especially if you&#39;re setting up a lot of similar alarms, as there&#39;s no ability to &quot;clone&quot; an existing alarm while making a minor change elsewhere. Scripting this using the CLI tools can save you lots of time.</p><p><strong>Use the free metrics.</strong><br> CloudWatch monitors all sorts of things for free (bandwidth, CPU usage, etc.), and you get up to 2 weeks of historical data. This saves you having to use your own tools to monitor you systems. If you need longer than 2 weeks, unfortunately you&#39;ll need to use a third-party or custom built monitoring solution.</p><p><strong>Use custom metrics.</strong><br> If you want to monitor things not covered by the free metrics, you can send your own metric information to CloudWatch and make use of the alarms and graphing features. This can not only be used for things like tracking diskspace usage, but also for custom application metrics too. The AWS page on <a href="http://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/publishingMetrics.html" target="_blank" rel="noopener noreferrer">publishing custom metrics<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> has more information.</p><p><strong>Use detailed monitoring.</strong><br> It&#39;s ~$3.50 per instance/month, and well worth the extra cost for the extra detail. 1 minute granularity is much better than 5 minute. You can have cases where a problem is hidden in the 5 minute breakdown, but shows itself quite clearly in the 1 minute graphs. This may not be useful for everyone, but it&#39;s made investigating some issues much easier for me.</p><h3 id="auto-scaling" tabindex="-1"><a class="header-anchor" href="#auto-scaling" aria-hidden="true">#</a> Auto-Scaling</h3><p><strong>Scale down on INSUFFICIENT_DATA as well as ALARM.</strong><br> For your scale-down action, make sure to trigger a scale-down event when there&#39;s no metric data, as well as when your trigger goes off. For example, if you have an app which usually has very low traffic, but experiences occasional spikes, you want to be sure that it scales down once the spike is over and the traffic stops. If there&#39;s no traffic, you&#39;ll get INSUFFIFIENT_DATA instead of ALARM for your low traffic threshold and it won&#39;t trigger a scale-down action.</p><p><strong>Use ELB health check instead of EC2 health checks.</strong><br> This is a configuration option when creating your scaling group, you can specify whether to use the standard EC2 checks (is the instance connected to the network), or to use your ELB health check. The ELB health check offers way more flexibility. If your health check fails and the instance gets taken out of the load balancing pool, you&#39;re pretty much always going to want to have that instance killed by auto-scaling and a fresh one take it&#39;s place. If you don&#39;t set up your scaling group to use the ELB checks, then that won&#39;t necessarily happen. The <a href="http://docs.aws.amazon.com/AutoScaling/latest/DeveloperGuide/as-add-elb-healthcheck.html" target="_blank" rel="noopener noreferrer">AWS documentation on adding the health check<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> has all the information you need to set this up.</p><p><strong>Only use the availability zones (AZs) your ELB is configured for.</strong><br> If you add your scaling group to multiple AZs, make sure your ELB is configured to use all of those AZs, otherwise your capacity will scale up, and the load balancer won&#39;t be able to see them.</p><p><strong>Don&#39;t use multiple scaling triggers on the same group.</strong><br> If you have multiple CloudWatch alarms which trigger scaling actions for the same auto-scaling group, it might not work as you initially expect it to. For example, let&#39;s say you add a trigger to scale up when CPU usage gets too high, or when the inbound network traffic gets high, and your scale down actions are the opposite. You might get an increase in CPU usage, but your inbound network is fine. So the high CPU trigger causes a scale-up action, but the low inbound traffic alarm immediately triggers a scale-down action. Depending on how you&#39;ve set your cooldown period, this can cause quite a problem as they&#39;ll just fight against each other. If you want multiple triggers, you can use multiple auto-scaling groups.</p><h3 id="iam" tabindex="-1"><a class="header-anchor" href="#iam" aria-hidden="true">#</a> IAM</h3><p><strong>Use IAM roles.</strong><br> Don&#39;t create users for application, always use IAM roles if you can. They simplify everything, and keeps things secure. Having application users just creates a point of failure (what if someone accidentally deletes the API key?) and it becomes a pain to manage.</p><p><strong>Users can have multiple API keys.</strong><br> This can be useful if someone is working on multiple projects, or if you want a one-time key just to test something out, without wanting to worry about accidentally revealing your normal key.</p><p><strong>IAM users can have multi-factor authentication, use it!</strong><br><a href="http://aws.amazon.com/iam/details/mfa/" target="_blank" rel="noopener noreferrer">Enable MFA<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> for your IAM users to add an extra layer of security. Your master account should most definitely have this, but it&#39;s also worth enabling it for normal IAM users too.</p><h3 id="route53" tabindex="-1"><a class="header-anchor" href="#route53" aria-hidden="true">#</a> Route53</h3><p><strong>Use ALIAS records.</strong><br> An ALIAS record will link your record set to a particular AWS resource directly (i.e. you can map a domain to an S3 bucket), but the key is that you don&#39;t get charged for any ALIAS lookups. So whereas a CNAME entry would cost you money, an ALIAS record won&#39;t. Also, unlike a CNAME, you can use an ALIAS on your zone apex. You can read more about this on <a href="http://docs.aws.amazon.com/Route53/latest/DeveloperGuide/CreatingAliasRRSets.html" target="_blank" rel="noopener noreferrer">the AWS page for creating alias resource record sets<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><h3 id="elastic-mapreduce" tabindex="-1"><a class="header-anchor" href="#elastic-mapreduce" aria-hidden="true">#</a> Elastic MapReduce</h3><p><strong>Specify a directory on S3 for Hive results.</strong><br> If you use Hive to output results to S3, you must specify a directory in the bucket, not the root of the bucket, otherwise you&#39;ll get a rather unhelpful NullPointerException with no real explanation as to why.</p><h3 id="miscellaneous-tips" tabindex="-1"><a class="header-anchor" href="#miscellaneous-tips" aria-hidden="true">#</a> Miscellaneous Tips</h3><p><strong>Scale horizontally.</strong><br> I&#39;ve found that using lots of smaller machines is generally more reliable than using a smaller number of larger machines. You need to balance this though, as trying to run your application from 100 t1.micro instances probably isn&#39;t going to work very well. Breaking your application into lots of smaller instances means you&#39;ll be more resiliant to failure in one of the machines. If you&#39;re just running from two massive compute cluster machines, and one goes down, things are going to get bad.</p><p><strong>Your application may require changes to work on AWS.</strong><br> While a lot of applications can probably just be deployed to an EC2 instance and work well, if you&#39;re coming from a physical environment, you may need to re-architect your application in order to accomodate changes. Don&#39;t just think you can copy the files over and be done with it.</p><p><strong>Always be redundant across availability zones (AZs).</strong><br> AZs can have outages, it&#39;s happened in the past that certain things in an AZ have gone down. Spreading your application into multiple AZs is as simple as adding a new AZ to your load balancer and starting an instance in that AZ. You should spread your load over two AZs at the very least! If you can afford it, being redundant across regions can also be well worth it, but this generally has a more complex set up cost and isn&#39;t always necessary. You can now copy AMIs between regions, and you can set up your Route53 records to balance traffic between regions, but you can&#39;t use a single ELB across regions.</p><p><strong>Be aware of AWS service limits before you deploy.</strong><br> Various service limits are enforced which aren&#39;t highlighted until you&#39;re actually trying to deploy your application and get the error notification. These limits can easily be increased by making a request to AWS support, however that can involve a significant turn around time (as low as a few minutes, up to a few days, based on past experience), during which you won&#39;t be able to finish deploying. A few days before deploying, you should consult the <a href="http://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html" target="_blank" rel="noopener noreferrer">service limits<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> page to see if you think you&#39;re going to exceed any of them, and make your support request ahead of time. You will need to make a separate request to each department where you need a limit increased. It&#39;s also worth pointing out that some limits are global, while others are per-region.</p><p><strong>Decide on a naming convention early, and stick to it.</strong><br> There&#39;s a lot of resources on AWS where you can change the name later, but there&#39;s equally a lot where you cannot (security group names, etc). Having a consistent naming convention will help to self-document your infrastructure. Don&#39;t forget to make use of tags too.</p><p><strong>Decide on a key-management strategy from the start.</strong><br> Are you going to have one key-pair per group of instances, or are you going to have one key-pair you use for your entire account? It&#39;s easy to modify your authorized-keys file with a bootstrap script of course, but you need to decide if you want to manage multiple key-pairs or not, as things will get complicated later on if you try to change your mind.</p><p><strong>Make sure AWS is right for your workload.</strong><br> User <a href="https://news.ycombinator.com/user?id=mbreese" target="_blank" rel="noopener noreferrer">mbreese<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> on Hacker News makes the very good point that you should make sure that using AWS is correct for your particular workload. If you have a steady load and 24/7 servers, it&#39;s possible there are cheaper providers you can use, or it might even be cheaper to use dedicated hardware of your own. One of the big benefits of AWS is the ability to scale up and down rapidly in response to load, but not everyone needs that feature. As when purchasing anything, you should shop around a bit first to make sure you&#39;re getting the best deal for what you need.</p><h3 id="parting-words" tabindex="-1"><a class="header-anchor" href="#parting-words" aria-hidden="true">#</a> Parting Words</h3><p>So there you have it, I hope these tips will be of use to someone out there. There&#39;s such a wealth of information available about AWS, whether it&#39;s great posts, presentations, or videos; I&#39;ve added a few additional reading links below for some of the resources I&#39;ve found most useful. If you have any other tips, or want to suggest improvements to this post (or point out errors), feel free to let me know on Twitter, I&#39;m <a href="https://twitter.com/r_adams" target="_blank" rel="noopener noreferrer">@r_adams<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><p>(<em>If you liked this post, then you might also like the talk I gave at USENIX SRECon14, <a href="https://static.wblinks.com/talks/srecon14/sre_in_the_cloud.pdf" target="_blank" rel="noopener noreferrer">SRE in the Cloud<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></em>).</p><h3 id="reference" tabindex="-1"><a class="header-anchor" href="#reference" aria-hidden="true">#</a> Reference</h3><p><a href="https://wblinks.com/notes/aws-tips-i-wish-id-known-before-i-started/?fbclid=IwAR3BGJAIFGOH9xk5tiQfZ9fvLJj7jB3a80RG_7RT7cFvJTqNCClxoRg26xU" target="_blank" rel="noopener noreferrer">https://wblinks.com/notes/aws-tips-i-wish-id-known-before-i-started/?fbclid=IwAR3BGJAIFGOH9xk5tiQfZ9fvLJj7jB3a80RG_7RT7cFvJTqNCClxoRg26xU<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/MinhTD18/minhtd18.github.io/edit/main/docs/posts/aws-tips.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">Last update: </span><!----></div><div class="contributors"><span class="label">Contributors: </span><!--[--><!--[--><span class="contributor" title="email: 70910873+MinhTD18@users.noreply.github.com">TruongDucMinh</span><!--]--><!--]--></div></div></footer><nav class="page-nav"><a href="/posts/aws-lambda-sqs.html" class="nav-link prev" aria-label="AWS Lambda and AWS SQS A Powerful Combination"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->AWS Lambda and AWS SQS A Powerful Combination</div></a><a href="/posts/aws-build-a-simple-infrastructure.html" class="nav-link next" aria-label="Building a simple infrastructure in AWS"><div class="hint">Next<span class="arrow end"></span></div><div class="link">Building a simple infrastructure in AWS<!----></div></a></nav><div class="giscus-wrapper input-top" id="comment" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!----><!--]--></main><!--]--><!----></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-be81fa68.js" defer></script>
  </body>
</html>
